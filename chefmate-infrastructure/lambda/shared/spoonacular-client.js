"use strict";
/**
 * Spoonacular API Client
 * Reusable client for making requests to Spoonacular API
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.SpoonacularError = exports.SpoonacularClient = void 0;
exports.createSpoonacularClient = createSpoonacularClient;
const SPOONACULAR_BASE_URL = 'https://api.spoonacular.com';
class SpoonacularClient {
    apiKey;
    constructor(options) {
        this.apiKey = options.apiKey;
    }
    /**
     * Make a GET request to Spoonacular API
     */
    async get(options) {
        const { endpoint, params = {} } = options;
        const url = new URL(endpoint, SPOONACULAR_BASE_URL);
        // Add query parameters
        Object.entries(params).forEach(([key, value]) => {
            if (value !== undefined && value !== null && value !== '') {
                url.searchParams.append(key, String(value));
            }
        });
        // Add API key
        url.searchParams.append('apiKey', this.apiKey);
        const response = await fetch(url.toString(), {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
            },
        });
        const data = await response.json();
        if (!response.ok) {
            const errorData = data;
            throw new SpoonacularError(errorData.message || 'Spoonacular API error', response.status, data);
        }
        return data;
    }
}
exports.SpoonacularClient = SpoonacularClient;
class SpoonacularError extends Error {
    status;
    details;
    constructor(message, status, details) {
        super(message);
        this.name = 'SpoonacularError';
        this.status = status;
        this.details = details;
    }
}
exports.SpoonacularError = SpoonacularError;
/**
 * Create a Spoonacular client instance from environment variables
 */
function createSpoonacularClient() {
    const apiKey = process.env.SPOONACULAR_API_KEY;
    if (!apiKey) {
        throw new Error('SPOONACULAR_API_KEY environment variable is not set');
    }
    return new SpoonacularClient({ apiKey });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3Bvb25hY3VsYXItY2xpZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3Bvb25hY3VsYXItY2xpZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7O0dBR0c7OztBQTBFSCwwREFRQztBQWhGRCxNQUFNLG9CQUFvQixHQUFHLDZCQUE2QixDQUFDO0FBVzNELE1BQWEsaUJBQWlCO0lBQ3BCLE1BQU0sQ0FBUztJQUV2QixZQUFZLE9BQWlDO1FBQzNDLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQztJQUMvQixDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLLENBQUMsR0FBRyxDQUFJLE9BQXVCO1FBQ2xDLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxHQUFHLEVBQUUsRUFBRSxHQUFHLE9BQU8sQ0FBQztRQUMxQyxNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxRQUFRLEVBQUUsb0JBQW9CLENBQUMsQ0FBQztRQUVwRCx1QkFBdUI7UUFDdkIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsRUFBRSxFQUFFO1lBQzlDLElBQUksS0FBSyxLQUFLLFNBQVMsSUFBSSxLQUFLLEtBQUssSUFBSSxJQUFJLEtBQUssS0FBSyxFQUFFLEVBQUUsQ0FBQztnQkFDMUQsR0FBRyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQzlDLENBQUM7UUFDSCxDQUFDLENBQUMsQ0FBQztRQUVILGNBQWM7UUFDZCxHQUFHLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRS9DLE1BQU0sUUFBUSxHQUFHLE1BQU0sS0FBSyxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsRUFBRTtZQUMzQyxNQUFNLEVBQUUsS0FBSztZQUNiLE9BQU8sRUFBRTtnQkFDUCxjQUFjLEVBQUUsa0JBQWtCO2FBQ25DO1NBQ0YsQ0FBQyxDQUFDO1FBRUgsTUFBTSxJQUFJLEdBQVksTUFBTSxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7UUFFNUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUNqQixNQUFNLFNBQVMsR0FBRyxJQUE0QixDQUFDO1lBQy9DLE1BQU0sSUFBSSxnQkFBZ0IsQ0FDeEIsU0FBUyxDQUFDLE9BQU8sSUFBSSx1QkFBdUIsRUFDNUMsUUFBUSxDQUFDLE1BQU0sRUFDZixJQUFJLENBQ0wsQ0FBQztRQUNKLENBQUM7UUFFRCxPQUFPLElBQVMsQ0FBQztJQUNuQixDQUFDO0NBQ0Y7QUE1Q0QsOENBNENDO0FBRUQsTUFBYSxnQkFBaUIsU0FBUSxLQUFLO0lBQ3pDLE1BQU0sQ0FBUztJQUNmLE9BQU8sQ0FBVztJQUVsQixZQUFZLE9BQWUsRUFBRSxNQUFjLEVBQUUsT0FBaUI7UUFDNUQsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2YsSUFBSSxDQUFDLElBQUksR0FBRyxrQkFBa0IsQ0FBQztRQUMvQixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztRQUNyQixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztJQUN6QixDQUFDO0NBQ0Y7QUFWRCw0Q0FVQztBQUVEOztHQUVHO0FBQ0gsU0FBZ0IsdUJBQXVCO0lBQ3JDLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUJBQW1CLENBQUM7SUFFL0MsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ1osTUFBTSxJQUFJLEtBQUssQ0FBQyxxREFBcUQsQ0FBQyxDQUFDO0lBQ3pFLENBQUM7SUFFRCxPQUFPLElBQUksaUJBQWlCLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDO0FBQzNDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFNwb29uYWN1bGFyIEFQSSBDbGllbnRcbiAqIFJldXNhYmxlIGNsaWVudCBmb3IgbWFraW5nIHJlcXVlc3RzIHRvIFNwb29uYWN1bGFyIEFQSVxuICovXG5cbmNvbnN0IFNQT09OQUNVTEFSX0JBU0VfVVJMID0gJ2h0dHBzOi8vYXBpLnNwb29uYWN1bGFyLmNvbSc7XG5cbmludGVyZmFjZSBTcG9vbmFjdWxhckNsaWVudE9wdGlvbnMge1xuICBhcGlLZXk6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFJlcXVlc3RPcHRpb25zIHtcbiAgZW5kcG9pbnQ6IHN0cmluZztcbiAgcGFyYW1zPzogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB8IHVuZGVmaW5lZD47XG59XG5cbmV4cG9ydCBjbGFzcyBTcG9vbmFjdWxhckNsaWVudCB7XG4gIHByaXZhdGUgYXBpS2V5OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9uczogU3Bvb25hY3VsYXJDbGllbnRPcHRpb25zKSB7XG4gICAgdGhpcy5hcGlLZXkgPSBvcHRpb25zLmFwaUtleTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlIGEgR0VUIHJlcXVlc3QgdG8gU3Bvb25hY3VsYXIgQVBJXG4gICAqL1xuICBhc3luYyBnZXQ8VD4ob3B0aW9uczogUmVxdWVzdE9wdGlvbnMpOiBQcm9taXNlPFQ+IHtcbiAgICBjb25zdCB7IGVuZHBvaW50LCBwYXJhbXMgPSB7fSB9ID0gb3B0aW9ucztcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGVuZHBvaW50LCBTUE9PTkFDVUxBUl9CQVNFX1VSTCk7XG5cbiAgICAvLyBBZGQgcXVlcnkgcGFyYW1ldGVyc1xuICAgIE9iamVjdC5lbnRyaWVzKHBhcmFtcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiB2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gJycpIHtcbiAgICAgICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoa2V5LCBTdHJpbmcodmFsdWUpKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEFkZCBBUEkga2V5XG4gICAgdXJsLnNlYXJjaFBhcmFtcy5hcHBlbmQoJ2FwaUtleScsIHRoaXMuYXBpS2V5KTtcblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLnRvU3RyaW5nKCksIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgY29uc3QgZGF0YTogdW5rbm93biA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGRhdGEgYXMgeyBtZXNzYWdlPzogc3RyaW5nIH07XG4gICAgICB0aHJvdyBuZXcgU3Bvb25hY3VsYXJFcnJvcihcbiAgICAgICAgZXJyb3JEYXRhLm1lc3NhZ2UgfHwgJ1Nwb29uYWN1bGFyIEFQSSBlcnJvcicsXG4gICAgICAgIHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgZGF0YVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YSBhcyBUO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTcG9vbmFjdWxhckVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBzdGF0dXM6IG51bWJlcjtcbiAgZGV0YWlscz86IHVua25vd247XG5cbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nLCBzdGF0dXM6IG51bWJlciwgZGV0YWlscz86IHVua25vd24pIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSAnU3Bvb25hY3VsYXJFcnJvcic7XG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgdGhpcy5kZXRhaWxzID0gZGV0YWlscztcbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZSBhIFNwb29uYWN1bGFyIGNsaWVudCBpbnN0YW5jZSBmcm9tIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3Bvb25hY3VsYXJDbGllbnQoKTogU3Bvb25hY3VsYXJDbGllbnQge1xuICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5TUE9PTkFDVUxBUl9BUElfS0VZO1xuXG4gIGlmICghYXBpS2V5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTUE9PTkFDVUxBUl9BUElfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIG5vdCBzZXQnKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgU3Bvb25hY3VsYXJDbGllbnQoeyBhcGlLZXkgfSk7XG59XG5cbi8vIFR5cGUgZGVmaW5pdGlvbnMgZm9yIFNwb29uYWN1bGFyIEFQSSByZXNwb25zZXNcblxuZXhwb3J0IGludGVyZmFjZSBSZWNpcGVTZWFyY2hSZXN1bHQge1xuICByZXN1bHRzOiBSZWNpcGVTdW1tYXJ5W107XG4gIG9mZnNldDogbnVtYmVyO1xuICBudW1iZXI6IG51bWJlcjtcbiAgdG90YWxSZXN1bHRzOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVjaXBlU3VtbWFyeSB7XG4gIGlkOiBudW1iZXI7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGltYWdlOiBzdHJpbmc7XG4gIGltYWdlVHlwZTogc3RyaW5nO1xuICBudXRyaXRpb24/OiB7XG4gICAgbnV0cmllbnRzOiBOdXRyaWVudFtdO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlY2lwZURldGFpbHMge1xuICBpZDogbnVtYmVyO1xuICB0aXRsZTogc3RyaW5nO1xuICBpbWFnZTogc3RyaW5nO1xuICBzZXJ2aW5nczogbnVtYmVyO1xuICByZWFkeUluTWludXRlczogbnVtYmVyO1xuICBzb3VyY2VOYW1lPzogc3RyaW5nO1xuICBzb3VyY2VVcmw/OiBzdHJpbmc7XG4gIHN1bW1hcnk6IHN0cmluZztcbiAgY3Vpc2luZXM6IHN0cmluZ1tdO1xuICBkaXNoVHlwZXM6IHN0cmluZ1tdO1xuICBkaWV0czogc3RyaW5nW107XG4gIGluc3RydWN0aW9ucz86IHN0cmluZztcbiAgYW5hbHl6ZWRJbnN0cnVjdGlvbnM6IEFuYWx5emVkSW5zdHJ1Y3Rpb25bXTtcbiAgZXh0ZW5kZWRJbmdyZWRpZW50czogSW5ncmVkaWVudFtdO1xuICBudXRyaXRpb24/OiBSZWNpcGVOdXRyaXRpb247XG4gIHZlZ2V0YXJpYW46IGJvb2xlYW47XG4gIHZlZ2FuOiBib29sZWFuO1xuICBnbHV0ZW5GcmVlOiBib29sZWFuO1xuICBkYWlyeUZyZWU6IGJvb2xlYW47XG4gIHZlcnlIZWFsdGh5OiBib29sZWFuO1xuICBjaGVhcDogYm9vbGVhbjtcbiAgdmVyeVBvcHVsYXI6IGJvb2xlYW47XG4gIHN1c3RhaW5hYmxlOiBib29sZWFuO1xuICBsb3dGb2RtYXA6IGJvb2xlYW47XG4gIHdlaWdodFdhdGNoZXJTbWFydFBvaW50czogbnVtYmVyO1xuICBoZWFsdGhTY29yZTogbnVtYmVyO1xuICBwcmljZVBlclNlcnZpbmc6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBbmFseXplZEluc3RydWN0aW9uIHtcbiAgbmFtZTogc3RyaW5nO1xuICBzdGVwczogSW5zdHJ1Y3Rpb25TdGVwW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5zdHJ1Y3Rpb25TdGVwIHtcbiAgbnVtYmVyOiBudW1iZXI7XG4gIHN0ZXA6IHN0cmluZztcbiAgaW5ncmVkaWVudHM/OiBTdGVwSW5ncmVkaWVudFtdO1xuICBlcXVpcG1lbnQ/OiBTdGVwRXF1aXBtZW50W107XG4gIGxlbmd0aD86IHtcbiAgICBudW1iZXI6IG51bWJlcjtcbiAgICB1bml0OiBzdHJpbmc7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3RlcEluZ3JlZGllbnQge1xuICBpZDogbnVtYmVyO1xuICBuYW1lOiBzdHJpbmc7XG4gIGxvY2FsaXplZE5hbWU6IHN0cmluZztcbiAgaW1hZ2U6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdGVwRXF1aXBtZW50IHtcbiAgaWQ6IG51bWJlcjtcbiAgbmFtZTogc3RyaW5nO1xuICBsb2NhbGl6ZWROYW1lOiBzdHJpbmc7XG4gIGltYWdlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5ncmVkaWVudCB7XG4gIGlkOiBudW1iZXI7XG4gIGFpc2xlOiBzdHJpbmc7XG4gIGltYWdlOiBzdHJpbmc7XG4gIGNvbnNpc3RlbmN5OiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgbmFtZUNsZWFuOiBzdHJpbmc7XG4gIG9yaWdpbmFsOiBzdHJpbmc7XG4gIG9yaWdpbmFsTmFtZTogc3RyaW5nO1xuICBhbW91bnQ6IG51bWJlcjtcbiAgdW5pdDogc3RyaW5nO1xuICBtZWFzdXJlczoge1xuICAgIHVzOiBNZWFzdXJlO1xuICAgIG1ldHJpYzogTWVhc3VyZTtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZWFzdXJlIHtcbiAgYW1vdW50OiBudW1iZXI7XG4gIHVuaXRTaG9ydDogc3RyaW5nO1xuICB1bml0TG9uZzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE51dHJpZW50IHtcbiAgbmFtZTogc3RyaW5nO1xuICBhbW91bnQ6IG51bWJlcjtcbiAgdW5pdDogc3RyaW5nO1xuICBwZXJjZW50T2ZEYWlseU5lZWRzPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlY2lwZU51dHJpdGlvbiB7XG4gIG51dHJpZW50czogTnV0cmllbnRbXTtcbiAgY2Fsb3JpY0JyZWFrZG93bjoge1xuICAgIHBlcmNlbnRQcm90ZWluOiBudW1iZXI7XG4gICAgcGVyY2VudEZhdDogbnVtYmVyO1xuICAgIHBlcmNlbnRDYXJiczogbnVtYmVyO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lYWxQbGFuRGF5IHtcbiAgbWVhbHM6IE1lYWxQbGFuTWVhbFtdO1xuICBudXRyaWVudHM6IHtcbiAgICBjYWxvcmllczogbnVtYmVyO1xuICAgIHByb3RlaW46IG51bWJlcjtcbiAgICBmYXQ6IG51bWJlcjtcbiAgICBjYXJib2h5ZHJhdGVzOiBudW1iZXI7XG4gIH07XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVhbFBsYW5XZWVrIHtcbiAgd2Vlazoge1xuICAgIG1vbmRheTogTWVhbFBsYW5EYXk7XG4gICAgdHVlc2RheTogTWVhbFBsYW5EYXk7XG4gICAgd2VkbmVzZGF5OiBNZWFsUGxhbkRheTtcbiAgICB0aHVyc2RheTogTWVhbFBsYW5EYXk7XG4gICAgZnJpZGF5OiBNZWFsUGxhbkRheTtcbiAgICBzYXR1cmRheTogTWVhbFBsYW5EYXk7XG4gICAgc3VuZGF5OiBNZWFsUGxhbkRheTtcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZWFsUGxhbk1lYWwge1xuICBpZDogbnVtYmVyO1xuICBpbWFnZVR5cGU6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgcmVhZHlJbk1pbnV0ZXM6IG51bWJlcjtcbiAgc2VydmluZ3M6IG51bWJlcjtcbiAgc291cmNlVXJsOiBzdHJpbmc7XG59XG4iXX0=